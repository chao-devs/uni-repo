<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>レポナビ v0</title>
</head>
<body>
  <h1>レポナビ（構成AI）</h1>

  <label>学部系（必須）</label><br>
  <select id="faculty">
    <option value="" disabled selected>選択してください</option>
    <option value="humanities">文系</option>
    <option value="science">理系</option>
    <option value="mixed">文理融合系</option>
  </select>
  <br><br>

  <label>課題文（必須）</label><br>
  <textarea id="theme" placeholder="レポートの課題文を入力してください"></textarea>
  <br><br>

  <label>文字数（必須）</label><br>
  <select id="length">
    <option value="" disabled selected>選択してください</option>
    <option value="500">500</option>
    <option value="1000">1000</option>
    <option value="2000">2000</option>
  </select>
  
  <br><br>
  <button id="generateBtn">構成を生成する</button>
  
  <hr>

  <pre id="result">ここに結果が表示されます</pre>

  <script>
    const button = document.getElementById("generateBtn");
    const facultySelect = document.getElementById("faculty");
    const themeInput  = document.getElementById("theme");
    const lengthSelect = document.getElementById("length");

    button.addEventListener("click", async () => {
      const theme = themeInput.value;
      const faculty = facultySelect.value;
      const length = lengthSelect.value;
      result.textContent = "生成中...";

      try {

        const response = await fetch("https://github.com/chao-devs/repo-navi_v0.1.git", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({text: theme,length: length,faculty: faculty})
        });

        const data = await response.json();
        result.textContent = data.data.structuring;
      } catch (e) {
        result.textContent = "エラー:\n" + e;
      }
    });
    const lengthselect = document.getElementById("length");

    lengthselect.addEventListener("change", () =>{
    console.log(lengthselect.value)
    });
  </script>

  <hr style="margin:24px 0; border:none; border-top:1px dashed #e5e7eb;">

  <a
  href="https://mire-ranunculus-21f.notion.site/2cc0666dae1880cd95bcd6fbdedbc4d7?pvs=105"
  target="_blank"
  rel="noopener noreferrer"
  style="color:#2563eb; text-decoration:underline;"
  >
  📝 改善にご協力をお願いします（1,2分）
  </a>
  <div style="margin-top:4px; font-size:12px; color:#6b7280;">
  ※完全匿名・ログイン不要
  </div>

</body>
</html>